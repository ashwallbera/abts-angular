<h1 matDialogTitle>EDIT DEPLOYED TRUCK</h1>

<mat-dialog-content>
  <table>
    <tr>
      <img
        src="../../../../assets/images/trucklogo.svg"
        alt=""
        style="margin-top: 20px"
      />
      <!-- Display truck details from trucks component -->
      <td style="width: 100%">
        <div class="d-flex justify-content-around td-height">
          <div><b>Truck type:</b> {{ data.deployed.truck.type }}</div>
          <div>
            <b>Max load capacity:</b> {{ data.deployed.truck.capacity }}
          </div>
        </div>
        <div class="d-flex justify-content-around td-height">
          <div><b>Plate number:</b> {{ data.deployed.truck.plateno }}</div>
          <div><b>Engine number:</b> {{ data.deployed.truck.engineno }}</div>
        </div>
        <div class="d-flex justify-content-around td-height">
          <div><b>Chassis Number: </b> {{ data.deployed.truck.chassis }}</div>
          <div><b>Year model:</b> {{ data.deployed.truck.yearmodel }}</div>
        </div>
      </td>
    </tr>
  </table>

  <div class="details">
    <form #deployForm [formGroup]="deployFormGroup">
      <mat-tab-group>
        <!-- SENDER -->
        <mat-tab label="Sender Details">
          <br />
          <mat-form-field appearance="outline">
            <mat-label>FULL NAME</mat-label>
            <input
              [readonly]="true"
              [(ngModel)]="data.deployed.sfullname"
              formControlName="sfullname"
              matInput
              placeholder="ENTER FULL NAME"
            />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>CONTACT NO.</mat-label>
            <input
              [readonly]="true"
              [(ngModel)]="data.deployed.scontactno"
              formControlName="scontactno"
              matInput
              placeholder="ENTER CONTACT NO."
            />
          </mat-form-field>
          <br />
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>ADDRESS</mat-label>
            <input
              [readonly]="true"
              [(ngModel)]="data.deployed.saddress"
              formControlName="saddress"
              matInput
              placeholder="ENTER ADDRESS"
            />
          </mat-form-field>
        </mat-tab>
        <!-- RECIPIENT -->
        <mat-tab label="Recipient Details">
          <br />
          <mat-form-field appearance="outline">
            <mat-label>FULL NAME</mat-label>
            <input
              [readonly]="true"
              [(ngModel)]="data.deployed.rfullname"
              formControlName="rfullname"
              matInput
              placeholder="ENTER FULL NAME"
            />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>CONTACT NO.</mat-label>
            <input
              [readonly]="true"
              [(ngModel)]="data.deployed.rcontactno"
              formControlName="rcontactno"
              matInput
              placeholder="ENTER CONTACT NO."
            />
          </mat-form-field>
          <br />
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>ADDRESS</mat-label>
            <input
              [readonly]="true"
              [(ngModel)]="data.deployed.raddress"
              formControlName="raddress"
              matInput
              placeholder="ENTER ADDRESS"
            />
          </mat-form-field>
        </mat-tab>
        <!-- other details -->
        <mat-tab label="Other Details">
          <br />
          <!-- <mat-form-field appearance="outline">
            <mat-label>DRIVER</mat-label>
            <input
              [(ngModel)]="data.driver"
              formControlName="driver"
              matInput
              placeholder="DRIVER"
            />
          </mat-form-field> -->

          <mat-form-field appearance="outline">
            <mat-label>SELECT DRIVERS</mat-label>
            <mat-select
              [(ngModel)]="selectedDriver"
              formControlName="driver"
              required
            >
              <mat-option>--</mat-option>
              <mat-option
                *ngFor="let driver of driverList"
                [value]="driver"
              >
                {{ driver.fname }} {{ driver.lname }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>CONTAINER VAN NO.</mat-label>
            <input
              [(ngModel)]="data.deployed.containervanno"
              formControlName="containervanno"
              matInput
              placeholder="CONTAINER VAN NO."
            />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>HELPER</mat-label>
            <mat-select
              [(ngModel)]="selectedHelper1"
              (selectionChange)="onChange(selectedHelper1)"
              formControlName="helper1"
              required
            >
              <!-- <mat-option>--</mat-option> -->

              <mat-option [value]="helper" *ngFor="let helper of helperList">
                {{ helper.fname }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <br />
          <!-- <mat-form-field appearance="outline">
            <mat-label>EXTRA HELPER</mat-label>
            <input formControlName="helper2" matInput placeholder="EXTRA HELPER" [(ngModel)]="selectedHelper2.fname"/>
          </mat-form-field> -->
          <mat-form-field appearance="outline">
            <mat-label>EXTRA HELPER</mat-label>
            <mat-select
              [(ngModel)]="selectedHelper2"
              (selectionChange)="onChange(selectedHelper2)"
              formControlName="helper2"
              required
            >
              <mat-option>--</mat-option>
              <ng-container *ngFor="let helper of helperList">
                <mat-option [value]="helper">
                  {{ helper.fname }} {{ helper.lname }}
                </mat-option>
              </ng-container>
            </mat-select>
          </mat-form-field>
          <!-- <mat-form-field appearance="outline">
            <mat-label>EXTRA HELPER</mat-label>
            <input
              formControlName="helper3"
              matInput
              placeholder="EXTRA HELPER"
            />
          </mat-form-field> -->

          <mat-form-field appearance="outline">
            <mat-label>EXTRA HELPER</mat-label>
            <mat-select
              [(ngModel)]="selectedHelper3"
              (selectionChange)="onChange(selectedHelper3)"
              formControlName="helper3"
              required
            >
              <mat-option>--</mat-option>
              <ng-container *ngFor="let helper of helperList">
                <mat-option
                  [value]="helper"
                  *ngIf="
                    helper != selectedHelper1 &&
                    helper != selectedHelper4 &&
                    helper != selectedHelper2
                  "
                >
                  {{ helper.fname }} {{ helper.lname }}
                </mat-option>
              </ng-container>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>EXTRA HELPER</mat-label>
            <mat-select
              [(ngModel)]="selectedHelper4"
              (selectionChange)="onChange(selectedHelper4)"
              formControlName="helper4"
              required
            >
              <mat-option>--</mat-option>
              <ng-container *ngFor="let helper of helperList">
                <mat-option
                  [value]="helper"
                  *ngIf="
                    helper != selectedHelper1 &&
                    helper != selectedHelper2 &&
                    helper != selectedHelper3
                  "
                >
                  {{ helper.fname }} {{ helper.lname }}
                </mat-option>
              </ng-container>
            </mat-select>
          </mat-form-field>
        </mat-tab>
      </mat-tab-group>
    </form>

    <!-- data -->
  </div>
</mat-dialog-content>

<mat-dialog-actions align="center">
  <button
    mat-button
    matDialogClose
    [disabled]="!deployFormGroup.valid"
    (click)="updateTruck(deployFormGroup.value)"
  >
    UPDATE
  </button>
</mat-dialog-actions>
